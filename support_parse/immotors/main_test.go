package immotors

import (
	"bcd-util/support_parse/parse"
	"bcd-util/util"
	"encoding/base64"
	"encoding/hex"
	"runtime/debug"
	"strings"
	"testing"
)

func BenchmarkToPacket(b *testing.B) {
	debug.SetGCPercent(1000)
	hexStr := "000100006466E9B3000413C339C87BDE00051DD636E16BEC00060000050000070007F024FFF8FFBC000801CC0001000000094300C4100033000AB70400620000000D00099240000008008169000000000801000000000000080200000000000008030250AB000000D006003E8D3A8987B4A0365934F9A820FFFC0080180100060699FC9700008000A0001FF90050010FF915B2001B48006D011F016F26B7E0895F722400B4F800000000D00900120000000000000000000FE000010005648000D00B00D96C7DF87DC87DF87DE87DF87DD87DF87DE87E007DE07E007DD87DD07DD87DD87DD87DE87DC87DD87DE07DD87DE87DE07DF07DD07DF87DF07E007DE87DF07DE07E087DF07DE87DD87DF87DF07DC87DF07DE07DF07DE07DC87DC87DF07DE87DF87DE87DF07DE07E007DE07DF87DE87DE87DF87DE07DF07DF07DF07DE87E007DF07DE87DE87DF87DF87E007E007E007DF87E087DF07DE07DF87DF07DF87DE07DF87DE87E087DF07DF07DD87DF87DF07DF87DE87E087DE07DE07DF87DE07E007DF87DF07DE87DF07DF87DF87DE87E087DF87DF87DF07E007DE07E08D00C00190C3E003C003C003C003E003C003C003C003D003C003C003C00D00D00190C3F003D003D003E003E003D003D003E003E003C003D003E00D00E00191830354C50454A334333353234304142434230313032303135D00F000C007D00007831800019007E00D0190010CE10053DB55580000000000000000000D0180014CF639C87BD8EEB1B720000323374D920FA040300D00A00554C534A4533363039364D533134303439354C53323143303141353239363030303638393836303932313735303030383935323034333839303836303334323032323030303031303231303030303333353932343437D012003F000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000D30600BE0000000000000000000000000000000000020100402FBA483FB5D7EABB8AE0003A7C8000C01B7858000000000000001D0100C02F1D703FC21FACBB5F80003C0120003FDA5F89000000000000000701004041A16FC08A11B5BBDD8000BC13C00043338A5600000000000000210100C02D86A1C0985DF3BAF02000BC3080004333127000000000000000190100C1154B08414831E0BBDB6000BC86800042B4D84E000000000000000D010041876C6A4217271C3B9F0000BD4EA000C33074E3D3000025002D0000BAC88A483A12CCF7B8D1B71700000000000000FF3C6EE95138EE177100BB3777E7"
	hexStr = strings.ToUpper(hexStr)
	decodeString, err := hex.DecodeString(hexStr)
	if err != nil {
		b.Fatalf("%+v", err)
	}

	byteBuf := parse.ToByteBuf(decodeString)
	byteBuf.MarkReaderIndex()
	byteBuf.MarkWriterIndex()
	for i := 0; i < b.N; i++ {
		byteBuf.ResetReaderIndex()
		byteBuf.ResetWriterIndex()
		_ = To_Packet(byteBuf)
	}
}

func BenchmarkPacket_Write(b *testing.B) {
	hexStr := "000100006466E9B3000413C339C87BDE00051DD636E16BEC00060000050000070007F024FFF8FFBC000801CC0001000000094300C4100033000AB70400620000000D00099240000008008169000000000801000000000000080200000000000008030250AB000000D006003E8D3A8987B4A0365934F9A820FFFC0080180100060699FC9700008000A0001FF90050010FF915B2001B48006D011F016F26B7E0895F722400B4F800000000D00900120000000000000000000FE000010005648000D00B00D96C7DF87DC87DF87DE87DF87DD87DF87DE87E007DE07E007DD87DD07DD87DD87DD87DE87DC87DD87DE07DD87DE87DE07DF07DD07DF87DF07E007DE87DF07DE07E087DF07DE87DD87DF87DF07DC87DF07DE07DF07DE07DC87DC87DF07DE87DF87DE87DF07DE07E007DE07DF87DE87DE87DF87DE07DF07DF07DF07DE87E007DF07DE87DE87DF87DF87E007E007E007DF87E087DF07DE07DF87DF07DF87DE07DF87DE87E087DF07DF07DD87DF87DF07DF87DE87E087DE07DE07DF87DE07E007DF87DF07DE87DF07DF87DF87DE87E087DF87DF87DF07E007DE07E08D00C00190C3E003C003C003C003E003C003C003C003D003C003C003C00D00D00190C3F003D003D003E003E003D003D003E003E003C003D003E00D00E00191830354C50454A334333353234304142434230313032303135D00F000C007D00007831800019007E00D0190010CE10053DB55580000000000000000000D0180014CF639C87BD8EEB1B720000323374D920FA040300D00A00554C534A4533363039364D533134303439354C53323143303141353239363030303638393836303932313735303030383935323034333839303836303334323032323030303031303231303030303333353932343437D012003F000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000D30600BE0000000000000000000000000000000000020100402FBA483FB5D7EABB8AE0003A7C8000C01B7858000000000000001D0100C02F1D703FC21FACBB5F80003C0120003FDA5F89000000000000000701004041A16FC08A11B5BBDD8000BC13C00043338A5600000000000000210100C02D86A1C0985DF3BAF02000BC3080004333127000000000000000190100C1154B08414831E0BBDB6000BC86800042B4D84E000000000000000D010041876C6A4217271C3B9F0000BD4EA000C33074E3D3000025002D0000BAC88A483A12CCF7B8D1B71700000000000000FF3C6EE95138EE177100BB3777E7"
	hexStr = strings.ToUpper(hexStr)
	decodeString, err := hex.DecodeString(hexStr)
	if err != nil {
		b.Fatalf("%+v", err)
	}
	byteBuf := parse.ToByteBuf(decodeString)
	packet := To_Packet(byteBuf)
	res := parse.ToByteBuf_capacity(1024)
	res.MarkReaderIndex()
	res.MarkWriterIndex()
	for i := 0; i < b.N; i++ {
		res.ResetReaderIndex()
		res.ResetWriterIndex()
		packet.Write(res)
	}
}

func TestPacket_Write(t *testing.T) {
	hexStr := "000100006466E9B3000413C339C87BDE00051DD636E16BEC00060000050000070007F024FFF8FFBC000801CC0001000000094300C4100033000AB70400620000000D00099240000008008169000000000801000000000000080200000000000008030250AB000000D006003E8D3A8987B4A0365934F9A820FFFC0080180100060699FC9700008000A0001FF90050010FF915B2001B48006D011F016F26B7E0895F722400B4F800000000D00900120000000000000000000FE000010005648000D00B00D96C7DF87DC87DF87DE87DF87DD87DF87DE87E007DE07E007DD87DD07DD87DD87DD87DE87DC87DD87DE07DD87DE87DE07DF07DD07DF87DF07E007DE87DF07DE07E087DF07DE87DD87DF87DF07DC87DF07DE07DF07DE07DC87DC87DF07DE87DF87DE87DF07DE07E007DE07DF87DE87DE87DF87DE07DF07DF07DF07DE87E007DF07DE87DE87DF87DF87E007E007E007DF87E087DF07DE07DF87DF07DF87DE07DF87DE87E087DF07DF07DD87DF87DF07DF87DE87E087DE07DE07DF87DE07E007DF87DF07DE87DF07DF87DF87DE87E087DF87DF87DF07E007DE07E08D00C00190C3E003C003C003C003E003C003C003C003D003C003C003C00D00D00190C3F003D003D003E003E003D003D003E003E003C003D003E00D00E00191830354C50454A334333353234304142434230313032303135D00F000C007D00007831800019007E00D0190010CE10053DB55580000000000000000000D0180014CF639C87BD8EEB1B720000323374D920FA040300D00A00554C534A4533363039364D533134303439354C53323143303141353239363030303638393836303932313735303030383935323034333839303836303334323032323030303031303231303030303333353932343437D012003F000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000D30600BE0000000000000000000000000000000000020100402FBA483FB5D7EABB8AE0003A7C8000C01B7858000000000000001D0100C02F1D703FC21FACBB5F80003C0120003FDA5F89000000000000000701004041A16FC08A11B5BBDD8000BC13C00043338A5600000000000000210100C02D86A1C0985DF3BAF02000BC3080004333127000000000000000190100C1154B08414831E0BBDB6000BC86800042B4D84E000000000000000D010041876C6A4217271C3B9F0000BD4EA000C33074E3D3000025002D0000BAC88A483A12CCF7B8D1B71700000000000000FF3C6EE95138EE177100BB3777E7"
	//hexStr := "0001000064E0E6FC00041388000000020005000000000F3A00060003E70003E700078FF08044800C000801CC00010000000AD380E4600000080001670000000008010000000000000802000000000000080300134E800000D006003E1933D533A95434993501A820FFFC00801801002600BFFDFD00008000E00020010070015BFBF9A4001A68000002A540D20157A008DE702E04B50000000000D00800090000000000000000000000000000000000000000002FFFD001872F04000000000000000000000000000000000000000000000000000000000000000000000000000000000000D00900120000000040000000000FE000010000FE0000D00A00554C534A574C3430393850533035353934364C53323333323841313034364232363238393836303932323735303030363237383838372020202020202020202020202020202020202020202020202020202020202020D00B00D96C79E079E879D879E079E879E879F879F879D079E079E079E079E879E079E879E079D879D079D879E079D07A0079D879F879D879E079D879E879E879F879E079F879F079E879E879C079E879F879E879E879D879D879E079D879D079D879F879F879E079D879F079E079F879D079E079D879E079E079E879E079E079F079D879D879D879F079E079E079D879E079D879C879D079F879E079F879E079E079D879E879D879E079E079E079F079D879F079D879D879D079D079D879D079D879D879E879D079E079C079F079F879E079D879E079F879E879E079E0D00C00190C490049004900480049004900480049004A0049004B004900D00D0031184A00480049004A004900490048004900490049004B004900280028002800280028002800280028002800280028002800D00E00191830354C504547313436353539304144343830323034303536D00F000C007E0000340080003F006800"
	hexStr = strings.ToUpper(hexStr)
	decodeString, err := hex.DecodeString(hexStr)
	if err != nil {
		t.Fatalf("%+v", err)
	}
	byteBuf := parse.ToByteBuf(decodeString)
	packet := To_Packet(byteBuf)
	if err != nil {
		t.Fatalf("%+v", err)
	}
	res := parse.ToByteBuf_empty()
	packet.Write(res)

	res_bytes := res.ToBytes()
	res_hex := strings.ToUpper(hex.EncodeToString(res_bytes))
	t.Logf("%s", hexStr)
	t.Logf("%s", res_hex)

	for i := range hexStr {
		if hexStr[i] != res_hex[i] {
			t.Logf("%d %s %s", i,
				hexStr[i:i+1], res_hex[i:i+1])
			break
		}
	}
	if hexStr != res_hex {
		t.Fail()
	}
}

func TestPacket_Write_base64(t *testing.T) {
	base64Str := "H4sIAAAAAAAAA+2aXWwUVRTHz4rAAgURje4aRUSImvixXVpooy2tSuJHjURAQHiopmr0iQeMzZakm+gDfjfRh2K1johxSCS5idEMSMxgYjIxmNyElzG+THyaKOpoxDQBrHfOOffudN1pd1cCPmwnszN75947dzbz/93/ObeQAXh69x3jMA/U35W74PKrjm04M/w3zF+76Zn+za/BAoD5AItgYTQ4vW96L2QzJyHzhwuLD8+HJ1STpWpXfcgF0HtDfltuzf1DOzszNmxcBeVcBlbDC+fPA5QhgFUZ2ANnz569CYpZ1Waw/9HBa8Vtk5M3vvx5fGuQi2AFwJKMG3+5IlCdzv9WlS7JHDg5AqWoFKjNx6Nfckuy5JUctQXq3FMlU6pEqqOPVzxV6uIn1YprBHglUN9kKVT9hOo8whYBtgxw87AHqVr62E63d7B2oFqF3K+LtQTWkyVLfVp8ZxvrU3tbfQo8uqVxLJniWtRzXFvg5uCZy3e3sY2l2gg8pxpxuY3PIXGzsV+patnY2lL7ON6Pfh/du1Par8rH1PUy9mfhuHULgdeoD0udCTyL+xB8LrCnMdWLhd/H8VkD2Qb5tj7ohXjfyMc+6MGjXArtOboQb/eos151qZe3uKwHt16zq0bLIJ8rdA5s3vRw+31d7e2FQv/9XZsLxUJHob1dXgFtR0Z3wCvqfcrD8yBzcHX25tHtb684+Fl/+ZupRW37AF5S70weln931893d+YHgf/K8gZoUy/qZfGXKHtiYRYyQ/F5NkMVsurK9LQ6zoOtS8oApxbAV1D1t9TNQP/KO3f2337Px8cXPz7QUxx94Osvnj1aXe//8XcKYK06zDu2851dx04O/3T0xLm36Epm+vjEj+t6vj+1Fr78qHsbLNs6SOWIggMpCMgiAvZO72MElGsj4JHcmq2EgN4/DQLOTf9dGwFPfaIQYNWBACUbjYAQJeqgiGLRkNB8BQkSRmAQ4Jl6Lko/5PYugmRKbYHaKyAIsY6H5z7DwjN9uQYBkSnxUd6S5eooYXiIJ4GSrUaAh5jwGFYVTDkGVwJhEuDd4/ZarDY+CaFI4B1drCPxWoyAMZamhfIU3G98tLjOGOLEUiJ2WfgBC1wgvCxGhYW1bRyzjyXCoIogQqNKImBjswjobQ4Br6YhYNmeBAJ+UQiwtB5aCKgbAe/O4gJ2KwQMMwL6aiOgO3eoAQQ8eYs4PHlwJgIuTyDgsqEkAkKDAB9fcXrJQxK+QoCP8glYQi7LUeLrK3n+rh8BrrmLy73Ercg/uCxbaRAgWT4eA0oiMkiyLqOAnICHsJJYj6QvDFLmRoCLSJHsgsgnxL2Po3QFI8DGcXh4haTtYWm872d0kktxGAG28SJxj9UI0B4lDQEX0wX8PpqD19IQsHwogYBfR1ouAOpEwFNUjgiYmCMQGK64gE9rIODBRhFQnwtQsplCCdNcHrBdJnuOJr9OBEhEQJBAAM3rPgcCNPtXAgEXN4eNPSEkxBJpEOAzBlyUKkk7vn/IAq8HAXqGdxgiur5GgGfmYsHI0AggJIybmjTDUyDg8j2FcQE2uwCBz2Mjtipmf24ElBNu4wIgoEkXkIqAFTsSCIgUAspaDy0E1I2A9+ZwAXtnR0B/4wg42BgCaN72jISSLsA3dp8Eoudyh+HgGwSEHFpQeBEaRDBQTEtpXIAOBCJ0AdqIuwghB8XiYlgScG7AYwTYLG8KBFwTCEie2XUg4BgX4OMohInEyfo7BhgCn4N2Mvs+mn+qTTO8h304iftrBJQTLqA6ECBXYGENgb9JJaCQDAHbIEP9lpcoF/B6GgKuHkgg4PRIKxCAJhDwfp2BQAoCenKHhv6FgNR0YC0E1AwEEAGREa1v0l0OCy1Gg8/pQH+GC/CMCwhwfm8UAdIk/iiFGGEugIw24YUkTzOqZBOfDASqEMCw0j3rQKA+BGjfIdmrODxb66SfYHlL/g2kQYD2CfuNqCvjcxkELo7B5l/Wxxo0Mgq7rBQEXMxcQBwIvJGGgGv6Egj4baIVCEATCJhkBPxVIx24e3o4mQtICQSGhp6bgYAXG0NAejowGQhoo+toF1AnAnyc2VRUj2sMofqkPsngU7ZArwxUwg3qKUykA71EIECxv+BAIOC8gYcjqxcBHovMRUiFiBWK1QW7mAoCnFQECGPtvUTvhBCrpNcLKOsQj09jx2sAARZjxroQLqDJQCAVAbmOJALu7sz3aT20EDArAoaoHBHwwRwI2FNxAUdqLQrm11S7gNkRcHjyUGOBQGQQIBMICEeyKAqd9COR+mzYPZR4xFKPX/6pEUAIUK9T7AV0tiA0CPCrXEASAUkXEBgEhCZfTyOjOd5nTKgSNVLyGT4/hWNAI9iDhFiXbL5tMDMXAhx2AIKRR5DSCLE49TeG5YJzFRoBIuEjbGxBwZNjPEO1C0gi4GKvCLyZhoDrbk0g4MxEKxcATSDAmhUBM9KBtRDwoEHAxrY0BKw2CHjmxTpXBEayKNiIDXyIAiVxRyT8keW8XkAClowA7QSaRYDkjEMlF6AXBSU7AdfM2JTFDw14CAEOA4NibzWSGQjwTLqyPgTQ/Eyw89knxCO1TbJQIyBkSGl0jJdovaASCIQmbHA5HeiwC3ATLsDj+5J3uPQIiAOBt9IQcP31yUVBhQBX66GFgLoR8OGs/xcwJwJ66kBAgy5gMWwb2PLQ9sc6Ct07Nm8pFIrrC8WBLcV1Xe0d/YViR8e9hcKGru6u9YXu4roNXQVVodi9vnNDx1y/ENuLKrZQKC45z9gUW5ArxJaIyRLhokPI6YjqCCPiFlNYFpT0ckHAe8yDgBMUQYNs0RGGx88QlCh/qSMMegrJrAiYYQFfC5gHxAQdp/hsb6h3HWGMJdii7UUjbBE8qph30X9lS5N5xlS2rFyu2LJKrzb+0EoyQCNsiR//dH7vwX8AsuY4FIcoAAA="
	bytes, err := base64.StdEncoding.DecodeString(base64Str)
	if err != nil {
		t.Fatalf("%+v", err)
	}
	unGzip, err := util.UnGzip(bytes)
	if err != nil {
		t.Fatalf("%+v", err)
	}
	hexStr := strings.ToUpper(hex.EncodeToString(unGzip))
	decodeString, err := hex.DecodeString(hexStr)
	if err != nil {
		t.Fatalf("%+v", err)
	}
	byteBuf := parse.ToByteBuf(decodeString)
	packets := To_Packets(byteBuf)
	res := parse.ToByteBuf_empty()
	Write_Packets(packets, res)
	res_bytes := res.ToBytes()
	res_hex := strings.ToUpper(hex.EncodeToString(res_bytes))
	t.Logf("%s", hexStr)
	t.Logf("%s", res_hex)

	for i := range hexStr {
		if hexStr[i] != res_hex[i] {
			t.Logf("%d %s %s", i,
				hexStr[i:i+1], res_hex[i:i+1])
			break
		}
	}
	if hexStr != res_hex {
		t.Fail()
	}
}

func TestPerformance_parse(t *testing.T) {
	debug.SetGCPercent(1000)
	hexStr := "000100006466E9B3000413C339C87BDE00051DD636E16BEC00060000050000070007F024FFF8FFBC000801CC0001000000094300C4100033000AB70400620000000D00099240000008008169000000000801000000000000080200000000000008030250AB000000D006003E8D3A8987B4A0365934F9A820FFFC0080180100060699FC9700008000A0001FF90050010FF915B2001B48006D011F016F26B7E0895F722400B4F800000000D00900120000000000000000000FE000010005648000D00B00D96C7DF87DC87DF87DE87DF87DD87DF87DE87E007DE07E007DD87DD07DD87DD87DD87DE87DC87DD87DE07DD87DE87DE07DF07DD07DF87DF07E007DE87DF07DE07E087DF07DE87DD87DF87DF07DC87DF07DE07DF07DE07DC87DC87DF07DE87DF87DE87DF07DE07E007DE07DF87DE87DE87DF87DE07DF07DF07DF07DE87E007DF07DE87DE87DF87DF87E007E007E007DF87E087DF07DE07DF87DF07DF87DE07DF87DE87E087DF07DF07DD87DF87DF07DF87DE87E087DE07DE07DF87DE07E007DF87DF07DE87DF07DF87DF87DE87E087DF87DF87DF07E007DE07E08D00C00190C3E003C003C003C003E003C003C003C003D003C003C003C00D00D00190C3F003D003D003E003E003D003D003E003E003C003D003E00D00E00191830354C50454A334333353234304142434230313032303135D00F000C007D00007831800019007E00D0190010CE10053DB55580000000000000000000D0180014CF639C87BD8EEB1B720000323374D920FA040300D00A00554C534A4533363039364D533134303439354C53323143303141353239363030303638393836303932313735303030383935323034333839303836303334323032323030303031303231303030303333353932343437D012003F000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000D30600BE0000000000000000000000000000000000020100402FBA483FB5D7EABB8AE0003A7C8000C01B7858000000000000001D0100C02F1D703FC21FACBB5F80003C0120003FDA5F89000000000000000701004041A16FC08A11B5BBDD8000BC13C00043338A5600000000000000210100C02D86A1C0985DF3BAF02000BC3080004333127000000000000000190100C1154B08414831E0BBDB6000BC86800042B4D84E000000000000000D010041876C6A4217271C3B9F0000BD4EA000C33074E3D3000025002D0000BAC88A483A12CCF7B8D1B71700000000000000FF3C6EE95138EE177100BB3777E7"
	hexStr = strings.ToUpper(hexStr)
	decodeString, err := hex.DecodeString(hexStr)
	if err != nil {
		t.Fatalf("%+v", err)
	}
	parse.TestMultiThreadPerformance_parse(decodeString, 1, 1000000000, func(byteBuf *parse.ByteBuf) {
		To_Packets(byteBuf)
		//util.Log.Infof("%d", byteBuf.ReaderIndex())
	})
}

func TestPerformance_deParse(t *testing.T) {
	hexStr := "000100006466E9B3000413C339C87BDE00051DD636E16BEC00060000050000070007F024FFF8FFBC000801CC0001000000094300C4100033000AB70400620000000D00099240000008008169000000000801000000000000080200000000000008030250AB000000D006003E8D3A8987B4A0365934F9A820FFFC0080180100060699FC9700008000A0001FF90050010FF915B2001B48006D011F016F26B7E0895F722400B4F800000000D00900120000000000000000000FE000010005648000D00B00D96C7DF87DC87DF87DE87DF87DD87DF87DE87E007DE07E007DD87DD07DD87DD87DD87DE87DC87DD87DE07DD87DE87DE07DF07DD07DF87DF07E007DE87DF07DE07E087DF07DE87DD87DF87DF07DC87DF07DE07DF07DE07DC87DC87DF07DE87DF87DE87DF07DE07E007DE07DF87DE87DE87DF87DE07DF07DF07DF07DE87E007DF07DE87DE87DF87DF87E007E007E007DF87E087DF07DE07DF87DF07DF87DE07DF87DE87E087DF07DF07DD87DF87DF07DF87DE87E087DE07DE07DF87DE07E007DF87DF07DE87DF07DF87DF87DE87E087DF87DF87DF07E007DE07E08D00C00190C3E003C003C003C003E003C003C003C003D003C003C003C00D00D00190C3F003D003D003E003E003D003D003E003E003C003D003E00D00E00191830354C50454A334333353234304142434230313032303135D00F000C007D00007831800019007E00D0190010CE10053DB55580000000000000000000D0180014CF639C87BD8EEB1B720000323374D920FA040300D00A00554C534A4533363039364D533134303439354C53323143303141353239363030303638393836303932313735303030383935323034333839303836303334323032323030303031303231303030303333353932343437D012003F000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000D30600BE0000000000000000000000000000000000020100402FBA483FB5D7EABB8AE0003A7C8000C01B7858000000000000001D0100C02F1D703FC21FACBB5F80003C0120003FDA5F89000000000000000701004041A16FC08A11B5BBDD8000BC13C00043338A5600000000000000210100C02D86A1C0985DF3BAF02000BC3080004333127000000000000000190100C1154B08414831E0BBDB6000BC86800042B4D84E000000000000000D010041876C6A4217271C3B9F0000BD4EA000C33074E3D3000025002D0000BAC88A483A12CCF7B8D1B71700000000000000FF3C6EE95138EE177100BB3777E7"
	hexStr = strings.ToUpper(hexStr)
	decodeString, err := hex.DecodeString(hexStr)
	if err != nil {
		t.Fatalf("%+v", err)
	}
	packet := To_Packet(parse.ToByteBuf(decodeString))
	buf := parse.ToByteBuf_capacity(1024)
	parse.TestMultiThreadPerformance_deParse(buf, 1, 1000000000, func(byteBuf *parse.ByteBuf) {
		packet.Write(byteBuf)
		//util.Log.Infof("%d", byteBuf.WriterIndex())
	})
}
